#!/bin/bash

echo "๐ ุจุฏุก ุชุดุบูู ุชุทุจูู n8n ุงูุนุฑุจู..."

# ุงูุชุญูู ูู ูุฌูุฏ Node.js
if ! command -v node &> /dev/null; then
    echo "โ Node.js ุบูุฑ ูุซุจุช. ูุฑุฌู ุชุซุจูุช Node.js ุฃููุงู."
    exit 1
fi

# ุงูุชุญูู ูู ูุฌูุฏ npm
if ! command -v npm &> /dev/null; then
    echo "โ npm ุบูุฑ ูุซุจุช. ูุฑุฌู ุชุซุจูุช npm ุฃููุงู."
    exit 1
fi

# ุฅูุดุงุก ูุฌูุฏ ูุงุนุฏุฉ ุงูุจูุงูุงุช ุฅุฐุง ูู ููู ููุฌูุฏุงู
mkdir -p database

# ุชุซุจูุช ุงููุชุทูุจุงุช
echo "๐ฆ ุชุซุจูุช ุงููุชุทูุจุงุช..."
npm install

if [ $? -eq 0 ]; then
    echo "โ ุชู ุชุซุจูุช ุงููุชุทูุจุงุช ุจูุฌุงุญ"
    
    # ุชุดุบูู ุงูุชุทุจูู
    echo "๐ฏ ุชุดุบูู ุงูุชุทุจูู..."
    npm start
else
    echo "โ ุฎุทุฃ ูู ุชุซุจูุช ุงููุชุทูุจุงุช"
    exit 1
fi